# Monitor Stooock

åŸºäºPHPçš„çº¯æ¨¡å‹è¡¥è´§ç›‘æ§

## ğŸŒŸ ä¸»è¦åŠŸèƒ½

- **AI æ™ºèƒ½è¯†åˆ«**ï¼šåˆ©ç”¨ AI æ¨¡å‹è‡ªåŠ¨è¯†åˆ«ç½‘é¡µä¸­çš„æœåŠ¡å™¨äº§å“åˆ—è¡¨ï¼ˆVPSã€ç‹¬ç«‹æœåŠ¡å™¨ç­‰ï¼‰
- **å®æ—¶ç›‘æ§**ï¼šç›‘æ§æœåŠ¡å™¨åº“å­˜çŠ¶æ€ã€ä»·æ ¼å˜åŒ–
- **Telegram é€šçŸ¥**ï¼šé€šè¿‡ Telegram Bot å®æ—¶æ¨é€å˜åŒ–é€šçŸ¥
- **åŸç”Ÿå¤šAPIå¯†é’¥æ”¯æŒ**ï¼šæœ¬åœ°åŸç”Ÿæ”¯æŒå¤šä¸ª AI API å¯†é’¥è½®è¯¢ï¼ˆé¿å…éœ€è¦å»ºç«‹è½®è¯¢æ± çš„éº»çƒ¦ï¼‰
- **è‡ªå®šä¹‰æŠ“å–è§„åˆ™**ï¼šæ”¯æŒä¸ºæ¯ä¸ª URL è®¾ç½®è‡ªå®šä¹‰çš„ AI æŠ“å–æŒ‡ä»¤
- **ç¼“å­˜æœºåˆ¶**ï¼šæœ¬åœ°ç¼“å­˜å‡å°‘é‡å¤è¯·æ±‚
- **å†å²è®°å½•**ï¼šä¿å­˜ç›‘æ§å†å²ï¼Œæ”¯æŒå¯¹æ¯”åˆ†æï¼ˆä»¥åŠé”è¯„ï¼‰

## ğŸ“¦ ç‰¹åˆ«åŠŸèƒ½
- **äºŒæ¬¡æŠ“å–**ï¼šé€šè¿‡æŒ‡å®šAIè¡Œä¸ºï¼Œå¯å¼•å¯¼å…¶è¿›è¡Œâ€œäºŒæ¬¡æŠ“å–â€ï¼Œè·å–æ›´ä¸ºè¯¦ç»†çš„æ•°æ®
- **ä¸»åŠ¨é”è¯„**ï¼šAI ç”ŸæˆæœåŠ¡å™¨é”è¯„è¯„ä»·
- **æ‰§è¡Œé¢‘ç‡æ§åˆ¶**ï¼šæ”¯æŒä¸ºä¸åŒ URL è®¾ç½®ä¸åŒçš„ç›‘æ§é¢‘ç‡ï¼ˆé€šè¿‡ [TimeUnit] å±æ€§è®¾ç½®ä¸åŒç²’åº¦ï¼‰

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- PHP 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- cURL æ‰©å±•
- JSON æ‰©å±•
- å¯å†™æƒé™ï¼ˆç”¨äºç¼“å­˜ç›®å½•ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/chunkburst/monitor_stooock.git
cd monitor_stooock
```

### 2. é…ç½®æ–‡ä»¶

ç¼–è¾‘ `src/config.php` æ–‡ä»¶ï¼š

```php
// é…ç½®ç›‘æ§çš„ URL åˆ—è¡¨
const MONITOR_URLS = [
    "https://example.com/servers" => "", // åŸºç¡€ç›‘æ§
    "https://vps.com/specials" => "åªè¯†åˆ«ä»·æ ¼ä½äº$50çš„æœåŠ¡å™¨", // è‡ªå®šä¹‰ AI æŒ‡ä»¤
];

// é…ç½® Telegram Bot
const TELEGRAM_BOT_TOKEN = "your_telegram_bot_token";
const TELEGRAM_CHAT_ID = "your_telegram_chat_id";

//é…ç½®APIï¼ˆæ­¤å¤„ä»¥ç¡…åŸºä¸¾ä¾‹ï¼‰
const AI_API_ENDPOINT = "https://api.siliconflow.cn/v1/chat/completions";
const AI_MODEL_NAME = "moonshotai/Kimi-K2-Instruct";
define('AI_API_KEYS', ['your_api_key_1', 'your_api_key_2']);
```

### 3. è¿è¡Œç›‘æ§

```bash
php src/monitor.php
```

### 4. è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆå¯é€‰ï¼‰

ä½¿ç”¨ cron è®¾ç½®å®šæœŸæ‰§è¡Œï¼š

```bash
# æ¯1åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
*/1 * * * * /usr/bin/php /path/to/monitor_stooock/src/monitor.php
```

## âš™ï¸ é…ç½®å‚æ•°è¯¦è§£

### æ ¸å¿ƒé…ç½®

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `MONITOR_URLS` | ç›‘æ§çš„ URL åˆ—è¡¨å’Œè‡ªå®šä¹‰ AI æŒ‡ä»¤ | æ•°ç»„ |
| `TELEGRAM_BOT_TOKEN` | Telegram Bot Token | - |
| `TELEGRAM_CHAT_ID` | Telegram èŠå¤© ID | - |
| `AI_API_ENDPOINT` | AI API ç«¯ç‚¹ | - |
| `AI_MODEL_NAME` | AI æ¨¡å‹åç§° | - |
| `AI_API_KEYS` | AI API å¯†é’¥æ•°ç»„ | - |

### æ€§èƒ½é…ç½®

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `MIN_NOTIFICATION_INTERVAL` | æœ€å°é€šçŸ¥é—´éš”ï¼ˆç§’ï¼‰ | 300 |
| `MAX_HISTORY_AGE_DAYS` | å†å²è®°å½•ä¿ç•™å¤©æ•° | 30 |
| `MAX_HISTORY_RECORDS` | æœ€å¤§å†å²è®°å½•æ•° | 50 |
| `MAX_RETRIES` | æœ€å¤§é‡è¯•æ¬¡æ•° | 2 |
| `RETRY_DELAY_SECONDS` | é‡è¯•å»¶è¿Ÿï¼ˆç§’ï¼‰ | 10 |
| `FETCH_TIMEOUT_SECONDS` | æŠ“å–ç½‘é¡µè¶…æ—¶æ—¶é—´ | 20 |
| `AI_PARSE_TIMEOUT_SECONDS` | AI è§£æè¶…æ—¶æ—¶é—´ | 60 |
| `AI_EVAL_TIMEOUT_SECONDS` | AI è¯„ä»·è¶…æ—¶æ—¶é—´ | 60 |
| `TELEGRAM_TIMEOUT_SECONDS` | Telegram å‘é€è¶…æ—¶æ—¶é—´ | 25 |

### æ—¥å¿—é…ç½®

| å‚æ•° | è¯´æ˜ | å¯é€‰å€¼ |
|------|------|--------|
| `LOG_LEVEL` | æ—¥å¿—çº§åˆ« | 'ERROR', 'INFO' |

## ğŸ“ ç›®å½•ç»“æ„

```
monitor_stooock/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ monitor.php         # ä¸»ç›‘æ§è„šæœ¬
â”‚   â”œâ”€â”€ config.php          # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ keys.txt            # API å¯†é’¥æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ cache/                  # ç¼“å­˜ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ *.cache            # URL ç¼“å­˜æ–‡ä»¶
â”‚   â””â”€â”€ *.execcount        # æ‰§è¡Œè®¡æ•°æ–‡ä»¶
â”œâ”€â”€ servers_history.json   # æœåŠ¡å™¨å†å²è®°å½•
â””â”€â”€ README.md              # è¯´æ˜æ–‡æ¡£
```

## ğŸ“¨ é€šçŸ¥æ¶ˆæ¯æ¨¡æ¿

ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰æ¶ˆæ¯æ¨¡æ¿ï¼Œåœ¨ `config.php` ä¸­çš„ `MESSAGE_TEMPLATES` é…ç½®ï¼š

- `new_server_found`: å‘ç°æ–°æœåŠ¡å™¨
- `stock_changed`: åº“å­˜å˜åŒ–
- `price_changed`: ä»·æ ¼å˜åŒ–
- `server_removed`: æœåŠ¡å™¨ä¸‹æ¶
- `evaluation`: AI è¯„ä»·
- `summary`: ç›‘æ§æ€»ç»“

## ğŸ”„ å·¥ä½œæµç¨‹(Workflow)

1. **æŠ“å–ç½‘é¡µ**ï¼šä»é…ç½®çš„ URL æŠ“å– HTML å†…å®¹
2. **è¯†åˆ«åŠŸèƒ½**ï¼šä½¿ç”¨æ¨¡å‹è¯†åˆ«æœåŠ¡å™¨åˆ—è¡¨
3. **æ•°æ®å¯¹æ¯”**ï¼šä¸å†å²è®°å½•å¯¹æ¯”ï¼Œæ£€æµ‹å˜åŒ–
4. **ç”Ÿæˆè¯„ä»·**ï¼šAIç”Ÿæˆé”è¯„
5. **å‘é€é€šçŸ¥**ï¼šé€šè¿‡ Telegram å‘é€å˜åŒ–é€šçŸ¥
6. **ä¿å­˜è®°å½•**ï¼šæ›´æ–°ç¼“å­˜å’Œå†å²è®°å½•

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†

- **è‡ªåŠ¨é‡è¯•**ï¼šç½‘ç»œè¯·æ±‚å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•
- **API å¯†é’¥è½®è¯¢**ï¼šé‡åˆ°é™æµæ—¶è‡ªåŠ¨åˆ‡æ¢ API å¯†é’¥
- **é™çº§å¤„ç†**ï¼šAI æœåŠ¡ä¸å¯ç”¨æ—¶è·³è¿‡ç›¸å…³åŠŸèƒ½
- **è¯¦ç»†æ—¥å¿—**ï¼šè®°å½•è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ä¾¿äºè°ƒè¯•

## ğŸ“ è‡ªå®šä¹‰ AI æŠ“å–æŒ‡ä»¤ç¤ºä¾‹

åœ¨ `MONITOR_URLS` ä¸­ä¸ºæ¯ä¸ª URL è®¾ç½®è‡ªå®šä¹‰æŒ‡ä»¤ï¼š

```php
const MONITOR_URLS = [
    "https://example.com/vps" => "åªè¯†åˆ«ä»·æ ¼åœ¨$10-$50ä¹‹é—´çš„æœåŠ¡å™¨",
    
    "https://example.com/dedicated" => "åªè¯†åˆ«å†…å­˜å¤§äº16GBçš„ç‹¬ç«‹æœåŠ¡å™¨",
    
    "https://example.com/specials" => "åªè¯†åˆ«æ ‡è®°ä¸ºæœ‰è´§æˆ–å¯è´­ä¹°çš„æœåŠ¡å™¨",
    
    "https://example.com/deals" => "åªè¯†åˆ«å¸¦æœ‰æŠ˜æ‰£ä¸”ä»·æ ¼ä½äº$100çš„æœåŠ¡å™¨",
];
```

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“ è”ç³»æˆ‘

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œå¯ä»¥åœ¨TGä¸Špmæˆ‘ (@auto_ccb)

è¯·CCBå–æ¯å’–å•¡ï¼ã€æ”¯æŒï¼šETHé“¾ / å¸å®‰é“¾(BSC) / Polyé“¾ç­‰ã€‘

æ”¶æ¬¾åœ°å€: `0x34ec2df7a44dfb252ed549a12b329eebfa016117`

![usdt](https://crimson-rear-ladybug-723.mypinata.cloud/ipfs/bafkreid363e4wtolwxsxtvgrswlftk2cb532x5dgrevawixgqrghomoqve)